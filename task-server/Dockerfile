# ğŸ³ 1ï¸âƒ£ Use the official Node.js 22 image
FROM node:22

# ğŸ— 2ï¸âƒ£ Set working directory inside the container
WORKDIR /usr/src/app

# ğŸ“œ 3ï¸âƒ£ Copy package files first (optimizes Docker caching)
COPY package.json package-lock.json ./

# ğŸ“¦ 4ï¸âƒ£ Install dependencies
RUN npm install --omit=dev

# ğŸ“ 5ï¸âƒ£ Copy the rest of the application code
COPY . .

# âš™ï¸ 6ï¸âƒ£ Build TypeScript (if using TypeScript)
RUN npm run build

# ğŸ”¥ 7ï¸âƒ£ Expose the app's port
EXPOSE 8080

# ğŸš€ 8ï¸âƒ£ Start the server
CMD ["node", "dist/server.js"]
